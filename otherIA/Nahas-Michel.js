!function(){var t,n,e,i,r,u,o,s,a,c,h,f,l,A,M,L,E,g,_;_="Michel",A=0,M="",g=0,this.onmessage=function(t){var n;return null!=t.data?(n=t.data,g=n.playerId,postMessage(new f(E(n.galaxy),M))):postMessage("data null")},E=function(t){var n,r,u,o,s,a;if(o=[],r=e.getPlayerPlanets(g,t),u=e.getEnnemyPlanets(g,t),null!==u&&u.length>0)for(s=0,a=r.length;a>s;s++)n=r[s],n.population>=20&&o.push(new i(n.id,L(n,u).id,n.population));return o},L=function(t,n){var i,r,u,o,a,c;for(o=n[0],i=e.getDistanceBetween(new s(t.x,t.y),new s(o.x,o.y)),a=0,c=n.length;c>a;a++)u=n[a],r=e.getDistanceBetween(new s(t.x,t.y),new s(u.x,u.y)),i>r&&(i=r,o=u);return o},t=function(){function t(t,n){this.width=t,this.height=n,this.content=[],this.fleet=[]}return t}(),a=function(){function t(t,n){this.from=t,this.to=n,this.from=10,this.to=25}return t}(),i=function(){function t(t,n,e){this.sourceID=t,this.targetID=n,this.numUnits=e}return t}(),r=function(){function t(t,n,e,i){this.x=t,this.y=n,this.size=e,this.owner=i,this.population=u.getDefaultPopulation(e),this.id=l.get()}return t}(),c=function(){function t(t,i,r,u){this.crew=t,this.source=i,this.target=r,this.creationTurn=u,this.owner=i.owner,this.travelDuration=Math.ceil(e.getDistanceBetween(new s(i.x,i.y),new s(r.x,r.y))/n.SHIP_SPEED)}return t}(),h=function(){function t(t,n){this.playerId=t,this.galaxy=n}return t}(),f=function(){function t(t,n){this.orders=t,this.consoleMessage=null!=n?n:"",this.error=""}return t}(),s=function(){function t(t,n){this.x=t,this.y=n}return t}(),e=function(){function t(){}return t.getDistanceBetween=function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},t.getPlayerPlanets=function(t,n){var e,i,r,u,o;for(i=[],o=n.content,r=0,u=o.length;u>r;r++)e=o[r],e.owner.id===t&&i.push(e);return i},t.getEnnemyPlanets=function(t,n){var e,i,r,u,o;for(i=[],o=n.content,r=0,u=o.length;u>r;r++)e=o[r],e.owner.id!==t&&i.push(e);return i},t}(),l=function(){function t(){}return t.lastUID=0,t.get=function(){return t.lastUID++,t.lastUID},t}(),n=function(){function t(){}return t.DEFAULT_PLAYER_POPULATION=100,t.NUM_PLANET=new a(5,10),t.PLANET_GROWTH=5,t.SHIP_SPEED=60,t.GAME_SPEED=500,t.GAME_DURATION=240,t.GAME_MAX_NUM_TURN=500,t}(),u=function(){function t(){}return t.DEFAULT_SMALL=20,t.DEFAULT_NORMAL=30,t.DEFAULT_BIG=40,t.DEFAULT_HUGE=50,t.MAX_SMALL=50,t.MAX_NORMAL=100,t.MAX_BIG=200,t.MAX_HUGE=300,t.getMaxPopulation=function(n){var e;switch(e=1,n){case o.SMALL:e=t.MAX_SMALL;break;case o.NORMAL:e=t.MAX_NORMAL;break;case o.BIG:e=t.MAX_BIG;break;case o.HUGE:e=t.MAX_HUGE}return e},t.getDefaultPopulation=function(n){var e;switch(e=1,n){case o.SMALL:e=t.DEFAULT_SMALL;break;case o.NORMAL:e=t.DEFAULT_NORMAL;break;case o.BIG:e=t.DEFAULT_BIG;break;case o.HUGE:e=t.DEFAULT_HUGE}return e},t}(),o=function(){function t(){}return t.SMALL=1,t.NORMAL=2,t.BIG=3,t.HUGE=4,t}()}.call(this);