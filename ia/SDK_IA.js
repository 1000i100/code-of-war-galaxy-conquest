(function(){var t,n,e,r,o,i,u,a,s,c,f,A,h,M,L,l,E,p;p="noname",M=0,L="",E=0,this.onmessage=function(t){var n;return null!=t.data?(n=t.data,E=n.playerId,postMessage(new A(l(n.galaxy),L))):postMessage("data null")},l=function(){return[]},t=function(){function t(t,n){this.width=t,this.height=n}return t.prototype.content=[],t.prototype.fleet=[],t}(),s=function(){function t(t,n){this.from=t,this.to=n}return t}(),r=function(){function t(t,n,e){this.sourceID=t,this.targetID=n,this.numUnits=e}return t}(),o=function(){function t(t,n,e,r){this.x=t,this.y=n,this.size=e,this.owner=r}return t.prototype.population=i.getDefaultPopulation(size),t.prototype.id=h.get(),t}(),c=function(){function t(t,n,e,r){this.crew=t,this.source=n,this.target=e,this.creationTurn=r}return t.prototype.owner=source.owner,t.prototype.travelDuration=Math.ceil(e.getDistanceBetween(new a(source.x,source.y),new a(target.x,target.y))/n.SHIP_SPEED),t}(),f=function(){function t(t,n){this.playerId=t,this.galaxy=n}return t}(),A=function(){function t(t,n){this.orders=t,this.consoleMessage=null!=n?n:""}return t.prototype.error="",t}(),a=function(){function t(t,n){this.x=t,this.y=n}return t}(),e=function(){function t(){}return t.getDistanceBetween=function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},t.getPlayerPlanets=function(t,n){var e,r,o,i,u;for(r=[],u=n.content,o=0,i=u.length;i>o;o++)e=u[o],e.owner.id===t&&r.push(e);return r},t.getEnnemyPlanets=function(t,n){var e,r,o,i,u;for(r=[],u=n.content,o=0,i=u.length;i>o;o++)e=u[o],e.owner.id!==t&&r.push(e);return r},t}(),h=function(){function t(){}return t.lastUID=0,t.get=function(){return t.lastUID++,t.lastUID},t}(),n=function(){function t(){}return t.DEFAULT_PLAYER_POPULATION=100,t.NUM_PLANET=new s(5,10),t.PLANET_GROWTH=5,t.SHIP_SPEED=60,t.GAME_SPEED=500,t.GAME_DURATION=240,t.GAME_MAX_NUM_TURN=500,t}(),i=function(){function t(){}return t.DEFAULT_SMALL=20,t.DEFAULT_NORMAL=30,t.DEFAULT_BIG=40,t.DEFAULT_HUGE=50,t.MAX_SMALL=50,t.MAX_NORMAL=100,t.MAX_BIG=200,t.MAX_HUGE=300,t.getMaxPopulation=function(n){var e;switch(e=1,n){case u.SMALL:e=t.MAX_SMALL;break;case u.NORMAL:e=t.MAX_NORMAL;break;case u.BIG:e=t.MAX_BIG;break;case u.HUGE:e=t.MAX_HUGE}return e},t.getDefaultPopulation=function(n){var e;switch(e=1,n){case u.SMALL:e=t.DEFAULT_SMALL;break;case u.NORMAL:e=t.DEFAULT_NORMAL;break;case u.BIG:e=t.DEFAULT_BIG;break;case u.HUGE:e=t.DEFAULT_HUGE}return e},t}(),u=function(){function t(){}return t.SMALL=1,t.NORMAL=2,t.BIG=3,t.HUGE=4,t}()}).call(this);